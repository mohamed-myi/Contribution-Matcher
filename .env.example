# Contribution Matcher - Environment Configuration
# Copy this file to .env and fill in your values:
#   cp .env.example .env

# =============================================================================
# Required Settings
# =============================================================================

# JWT Secret - MUST be at least 32 characters
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(48))"
JWT_SECRET_KEY=your-very-long-and-secure-jwt-secret-key-here-at-least-32-chars

# GitHub OAuth (for user authentication)
GITHUB_CLIENT_ID=your_github_oauth_client_id
GITHUB_CLIENT_SECRET=your_github_oauth_client_secret
GITHUB_REDIRECT_URI=http://localhost:8000/api/auth/github/callback

# GitHub Personal Access Token (for API discovery)
# Generate at: https://github.com/settings/tokens
PAT_TOKEN=ghp_your_personal_access_token

# =============================================================================
# Optional Security Settings
# =============================================================================

# Token encryption key - Fernet key for encrypting stored tokens
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
TOKEN_ENCRYPTION_KEY=

# Require encryption (fail startup if encryption key not set)
REQUIRE_ENCRYPTION=false

# Strict security mode (fail on warnings too)
STRICT_SECURITY=false

# =============================================================================
# Database Configuration
# =============================================================================

# SQLite (default for development)
DATABASE_URL=sqlite:///contribution_matcher.db

# PostgreSQL (for production)
# DATABASE_URL=postgresql://user:password@localhost:5432/contribution_matcher

# Database pool settings (PostgreSQL only)
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_PRE_PING=true

# =============================================================================
# Redis Configuration
# =============================================================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# =============================================================================
# Celery Configuration
# =============================================================================

CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# =============================================================================
# API Configuration
# =============================================================================

DEBUG=false
CORS_ALLOWED_ORIGINS=http://localhost:5173

# =============================================================================
# Rate Limiting
# =============================================================================

# Auth rate limit (requests per window)
AUTH_RATE_LIMIT=5
AUTH_RATE_WINDOW=300

# API rate limit (requests per window)
API_RATE_LIMIT=100
API_RATE_WINDOW=60

# =============================================================================
# Scheduler Configuration
# =============================================================================

ENABLE_SCHEDULER=false
SCHEDULER_DISCOVERY_CRON=0 6 * * *
SCHEDULER_SCORING_CRON=30 6 * * *
SCHEDULER_ML_CRON=0 7 * * *
SCHEDULER_DISCOVERY_LIMIT=50

# =============================================================================
# Discovery Settings
# =============================================================================

FAST_DISCOVERY=true
CACHE_VALIDITY_DAYS=7
